<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="path/to/icon.png" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" href="static/base.css">
</head>

<body>
    <div class="left-sidebar">
        <h4 class="text-center">Budget Tracker</h4>
        <a href="#">üè† Home</a>
        <a href="#">üí∏ Expenses</a>
        <a href="#">üìä Reports</a>
        <a href="#">üîß Settings</a>
        <button id="darkModeToggle" class="btn btn-secondary mt-3">üí°</button>
        <div class="logout-button">
            <a href="#" class="btn btn-danger w-100 mt-3">Log Out</a>
        </div>
    </div>

    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <!-- Main Content -->
                <div class="col-md-12">
                    <div class="row mb-4">
                        <!-- Current Balance Card -->
                        <div class="col-md-4">
                            <div class="card shadow-sm mb-4">
                                <div class="card-body text-center">
                                    <h6 class="card-title">Current Balance</h6>
                                    <h3 class="fw-bold">AED {{ balance }}</h3>
                                </div>
                            </div>

                            <!-- Transaction Form -->
                            <div class="card shadow">
                                <div class="card-body">
                                    <h5 class="card-title text-center">Transaction Form</h5>
                                    <form method="POST" action="#">
                                        <div class="mb-3">
                                            <label for="action_type" class="form-label">Action:</label>
                                            <select class="form-select" id="action_type" name="action_type" required onchange="toggleFields()">
                                                <option value="" disabled selected>Select action</option>
                                                <option value="transaction">Transaction</option>
                                                <option value="deposit">Deposit</option>
                                                <option value="withdraw">Withdraw</option>
                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <label for="amount" class="form-label">Amount:</label>
                                            <input type="number" class="form-control" id="amount" name="amount" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="date" class="form-label">Date:</label>
                                            <input type="date" class="form-control" id="date" name="date" required>
                                        </div>

                                        <div id="transaction-fields" style="display: none;">
                                            <div class="mb-3">
                                                <label for="title" class="form-label">Title:</label>
                                                <input type="text" class="form-control" id="title" name="title">
                                            </div>
                                            <div class="mb-3">
                                                <label for="category" class="form-label">Category:</label>
                                                <select class="form-select" id="category" name="category">
                                                    <option value="" disabled selected>Select a category</option>
                                                    <option value="Food">üçî Food</option>
                                                    <option value="Transportation">üöó Transportation</option>
                                                    <option value="Entertainment">üé± Entertainment</option>
                                                    <option value="Shopping">üõí Shopping</option>
                                                    <option value="Gifts">üéÅ Gifts</option>
                                                    <option value="Utilities">üß∞ Utilities</option>
                                                    <option value="Other">‚ö°Ô∏è Other</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div id="deposit-withdraw-fields" style="display: none;">
                                            <div class="mb-3">
                                                <label for="transaction_type" class="form-label">Transaction Type:</label>
                                                <select class="form-select" id="transaction_type" name="transaction_type">
                                                    <option value="deposit">Deposit</option>
                                                    <option value="withdraw">Withdraw</option>
                                                </select>
                                            </div>
                                        </div>

                                        <button type="submit" class="btn btn-primary w-100">Submit</button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Expenses Card -->
                        <div class="col-md-4">
                            <div class="card shadow-sm">
                                <div class="card-body text-center">
                                    <h6 class="card-title">Expenses</h6>
                                    <h3 class="fw-bold">AED {{ total_expenses | round(2) }}</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="right-sidebar">
        <div class="profile">
            <div class="profile-pic"></div>
            <span>Fayyad Rahman</span>
        </div>
        <section class="transactions">
            <h3>Recent Transactions</h3>
            <div class="container my-4">
                <ul class="transaction-list">
                    <li class="transaction-item">
                        <span class="icon">üõí</span>
                        <span class="title">Groceries</span>
                        <span class="date">December 05, 2024</span>
                        <span class="amount">- AED36</span>
                    </li>
                    <li class="transaction-item">
                        <span class="icon">üé±</span>
                        <span class="title">Rails Pool</span>
                        <span class="date">December 02, 2024</span>
                        <span class="amount">AED45</span>
                    </li>
                    <li class="transaction-item">
                        <span class="icon">üçî</span>
                        <span class="title">Hardees</span>
                        <span class="date">November 23, 2024</span>
                        <span class="amount">- AED20</span>
                    </li>
                </ul>
            </div>
        </section>
    </div>

    <script>
        // JavaScript for toggling dark mode and other functionalities
        function toggleFields() {
            const actionType = document.getElementById('action_type').value;
            const transactionFields = document.getElementById('transaction-fields');
            const depositWithdrawFields = document.getElementById('deposit-withdraw-fields');
            transactionFields.style.display = 'none';
            depositWithdrawFields.style.display = 'none';
            if (actionType === 'transaction') {
                transactionFields.style.display = 'block';
            } else if (actionType === 'deposit' || actionType === 'withdraw') {
                depositWithdrawFields.style.display = 'block';
            }
        }

        document.getElementById('darkModeToggle').addEventListener('click', function () {
            document.body.classList.toggle('dark-mode');

            // Toggle classes for all cards dynamically
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                if (document.body.classList.contains('dark-mode')) {
                    card.classList.add('bg-dark', 'text-light');
                    card.classList.remove('bg-light', 'text-dark');
                } else {
                    card.classList.add('bg-light', 'text-dark');
                    card.classList.remove('bg-dark', 'text-light');
                }
            });

            // Toggle classes for sidebars
            const leftSidebar = document.querySelector('.left-sidebar');
            const rightSidebar = document.querySelector('.right-sidebar');
            leftSidebar.classList.toggle('bg-dark');
            rightSidebar.classList.toggle('bg-dark');
            leftSidebar.classList.toggle('text-light');
            rightSidebar.classList.toggle('text-light');

            // Store the theme preference in localStorage
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });

        window.onload = function () {
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');

                const cards = document.querySelectorAll('.card');
                cards.forEach(card => {
                    card.classList.add('bg-dark', 'text-light');
                    card.classList.remove('bg-light', 'text-dark');
                });

                const leftSidebar = document.querySelector('.left-sidebar');
                const rightSidebar = document.querySelector('.right-sidebar');
                leftSidebar.classList.add('bg-dark', 'text-light');
                rightSidebar.classList.add('bg-dark', 'text-light');
            } else {
                const cards = document.querySelectorAll('.card');
                cards.forEach(card => {
                    card.classList.add('bg-light', 'text-dark');
                    card.classList.remove('bg-dark', 'text-light');
                });
            }
        };
    </script>
</body>

</html>
